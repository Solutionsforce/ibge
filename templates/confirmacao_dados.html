<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirmação de Dados - IBGE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        @import url('https://fonts.cdnfonts.com/css/rawline');
        
        body {
            font-family: 'Rawline', sans-serif;
            background-color: #f8f9fa;
        }
        
        /* Marca d'água do IBGE */
        
        .content-overlay {
            position: relative;
            z-index: 5;
            background: transparent;
        }
        
        /* Estilo para inputs */
        input[type="text"], input[type="email"], select {
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            padding: 0.75rem;
            font-size: 16px;
            width: 100%;
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        
        input[type="text"]:focus, input[type="email"]:focus, select:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }
        
        /* Botões */
        .btn-primary {
            background-color: #1d4ed8;
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 0.375rem;
            font-weight: 600;
            transition: background-color 0.15s ease-in-out;
            border: none;
            cursor: pointer;
            min-width: 200px;
        }
        
        .btn-primary:hover {
            background-color: #1e40af;
        }
        
        .btn-secondary {
            background-color: #6b7280;
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 0.375rem;
            font-weight: 600;
            transition: background-color 0.15s ease-in-out;
            border: none;
            cursor: pointer;
            min-width: 200px;
        }
        
        .btn-secondary:hover {
            background-color: #4b5563;
        }
        
        /* Layout responsivo */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .ibge-watermark {
                width: 95vw;
            }
        }
        
        /* Cards e seções */
        .info-card {
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .section-title {
            color: #1f2937;
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 0.5rem;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- IBGE Logo Watermark -->
    <div class="fixed inset-0 pointer-events-none overflow-hidden" style="z-index: 1;">
        <!-- Logo única ocupando toda largura -->
        <div class="absolute select-none" 
             style="top: 50%; left: 0; right: 0; transform: translateY(-50%) rotate(25deg); transform-origin: center;">
            <img src="https://logodownload.org/wp-content/uploads/2018/02/ibge-logo.png" 
                 alt="IBGE Watermark" 
                 class="opacity-25 w-full h-auto max-w-none"
                 style="filter: grayscale(40%); width: 90vw; margin-left: -5vw;">
        </div>
    </div>

    <!-- Top bar -->
    <div class="bg-[#0B2341] w-full content-overlay">
        <div class="flex items-center h-[42px]">
            <div class="flex items-center h-full pl-4 pr-4 flex-shrink-0">
                <a href="{{ url_for('login') }}" class="flex items-center h-full">
                    <img src="https://www.gov.br/governodigital/pt-br/estrategias-e-governanca-digital/EGD2020/imagens/logo-white.png" alt="gov.br logo, white text on transparent background" style="height: 20px; width: 65px; object-fit: contain;"/>
                </a>
            </div>
            <div class="h-4 w-px bg-[#33507A] mx-3 flex-shrink-0"></div>
            <div class="flex-1 min-w-0"></div>
            <div class="flex items-center h-full pr-2">
                <a href="{{ url_for('login') }}" class="header-menu text-white font-bold px-1 md:px-3 h-full flex items-center cursor-pointer hover:bg-[#33507A] transition-colors whitespace-nowrap text-xs">
                    ACESSO À INFORMAÇÃO
                </a>
                <div class="h-4 w-px bg-[#33507A] mx-1"></div>
                <a href="{{ url_for('login') }}" class="header-menu text-white font-bold px-1 md:px-3 h-full flex items-center cursor-pointer hover:bg-[#33507A] transition-colors text-xs">
                    PARTICIPE
                </a>
                <div class="h-4 w-px bg-[#33507A] mx-1"></div>
                <a href="{{ url_for('login') }}" class="header-menu text-white font-bold px-1 md:px-3 h-full flex items-center cursor-pointer hover:bg-[#33507A] transition-colors text-xs">
                    LEGISLAÇÃO
                </a>
            </div>
        </div>
    </div>

    <!-- IBGE logo and language -->
    <div class="w-full flex flex-col items-center pt-6 pb-2 bg-white content-overlay">
        <img alt="IBGE logo azul, texto e símbolo geométrico em fundo transparente" class="mb-2" src="https://www.ibge.gov.br/templates/novo_portal_base/imagens/logo_mobile.png" style="width:125px; height:24px;"/>
        <div class="relative">
            <div class="flex items-center space-x-2 mt-1 cursor-pointer hover:bg-gray-50 px-2 py-1 rounded transition-colors" id="language-selector">
                <img alt="Brazilian flag" class="w-6 h-5 rounded shadow-sm border border-gray-200" src="https://www.ibge.gov.br/templates/novo_portal_base/imagens/pt_br.png"/>
                <div class="h-7 w-px bg-gray-300 mx-1"></div>
                <img alt="Globe icon for language selection" class="w-6 h-6" src="https://www.ibge.gov.br/media/mod_gtranslate/flags/svg/globe.svg"/>
                <span class="text-[#444] text-sm font-normal">
                    Outros idiomas
                </span>
                <i class="fas fa-chevron-down text-gray-500 ml-1 text-xs transition-transform duration-200" id="language-chevron"></i>
            </div>
            
            <!-- Language dropdown -->
            <div id="language-dropdown" class="absolute top-full left-1/2 transform -translate-x-1/2 mt-2 bg-white border border-gray-200 rounded-lg shadow-lg z-50 hidden w-56">
                <div class="max-h-48 overflow-y-auto py-2">
                    <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-50 text-sm text-gray-700">
                        <img src="https://flagcdn.com/w20/us.png" alt="English" class="w-5 h-4 mr-3 rounded"/>
                        <span>English</span>
                    </a>
                    <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-50 text-sm text-gray-700">
                        <img src="https://flagcdn.com/w20/es.png" alt="Español" class="w-5 h-4 mr-3 rounded"/>
                        <span>Español</span>
                    </a>
                    <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-50 text-sm text-gray-700">
                        <img src="https://flagcdn.com/w20/fr.png" alt="Français" class="w-5 h-4 mr-3 rounded"/>
                        <span>Français</span>
                    </a>
                    <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-50 text-sm text-gray-700">
                        <img src="https://flagcdn.com/w20/de.png" alt="Deutsch" class="w-5 h-4 mr-3 rounded"/>
                        <span>Deutsch</span>
                    </a>
                    <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-50 text-sm text-gray-700">
                        <img src="https://flagcdn.com/w20/it.png" alt="Italiano" class="w-5 h-4 mr-3 rounded"/>
                        <span>Italiano</span>
                    </a>
                    <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-50 text-sm text-gray-700">
                        <img src="https://flagcdn.com/w20/jp.png" alt="日本語" class="w-5 h-4 mr-3 rounded"/>
                        <span>日本語</span>
                    </a>
                    <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-50 text-sm text-gray-700">
                        <img src="https://flagcdn.com/w20/cn.png" alt="中文" class="w-5 h-4 mr-3 rounded"/>
                        <span>中文</span>
                    </a>
                    <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-50 text-sm text-gray-700">
                        <img src="https://flagcdn.com/w20/ru.png" alt="Русский" class="w-5 h-4 mr-3 rounded"/>
                        <span>Русский</span>
                    </a>
                    <a href="#" class="flex items-center px-3 py-2 hover:bg-gray-50 text-sm text-gray-700">
                        <img src="https://flagcdn.com/w20/ar.png" alt="العربية" class="w-5 h-4 mr-3 rounded"/>
                        <span>العربية</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Instituto name line -->
    <div class="bg-white border-t border-gray-200 content-overlay">
        <div class="py-2">
            <p class="text-gray-700 text-sm text-center">Instituto Brasileiro de Geografia e Estatística</p>
        </div>
    </div>

    <!-- Conteúdo principal -->
<!-- Main Content -->
<div class="bg-gray-50 min-h-screen relative">
    <div class="container mx-auto px-4 py-12 relative content-overlay" style="z-index: 5;">


        <div class="max-w-6xl mx-auto space-y-6">
            <!-- Cabeçalho do Formulário -->
            <section class="bg-white border border-gray-300 shadow-sm">
                <div class="bg-[#0B2341] text-white px-6 py-4">
                    <div class="flex items-center">
                        <img src="https://www.ibge.gov.br/templates/novo_portal_base/imagens/logo_mobile.png" alt="IBGE" class="h-8 mr-4 filter brightness-0 invert">
                        <div>
                            <h1 class="text-xl font-bold">PROCESSO SELETIVO SIMPLIFICADO IBGE 2025</h1>
                            <p class="text-sm text-gray-200">EDITAL Nº 001/2025 - FORMULÁRIO DE INSCRIÇÃO</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-[#184A8C] text-white px-6 py-3">
                    <p class="text-sm font-medium">CONFIRMAÇÃO DOS DADOS DE INSCRIÇÃO</p>
                    <p class="text-xs text-gray-200">Confira atentamente todas as informações antes de finalizar sua inscrição</p>
                </div>
            </section>

            <!-- SEÇÃO I - DADOS PESSOAIS -->
            <section class="bg-white border border-gray-300 shadow-sm">
                <div class="bg-gray-100 border-b border-gray-300 px-6 py-3">
                    <h2 class="text-lg font-bold text-gray-800">SEÇÃO I - IDENTIFICAÇÃO DO CANDIDATO</h2>
                </div>
                
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm">
                        <div class="bg-gray-50 p-3 border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">CPF</label>
                            <input type="text" class="w-full p-2 border border-gray-300 rounded text-sm font-medium" 
                                   value="{{ usuario.cpf or '' }}" id="cpf" maxlength="14" placeholder="000.000.000-00">
                        </div>
                        <div class="bg-gray-50 p-3 border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Nome Completo</label>
                            <input type="text" class="w-full p-2 border border-gray-300 rounded text-sm font-medium" 
                                   value="{{ usuario.nome_completo or '' }}" id="nome-completo" placeholder="Digite o Nome Completo">
                        </div>
                        <div class="bg-gray-50 p-3 border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Data de Nascimento</label>
                            <input type="date" class="w-full p-2 border border-gray-300 rounded text-sm font-medium" 
                                   value="" id="data-nascimento">
                        </div>
                        <div class="bg-gray-50 p-3 border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Nome da Mãe</label>
                            <input type="text" class="w-full p-2 border border-gray-300 rounded text-sm font-medium" 
                                   value="{{ usuario.nome_mae or '' }}" id="nome-mae" placeholder="Digite o Nome da Mãe">
                        </div>
                        <div class="bg-gray-50 p-3 border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Sexo</label>
                            <select class="w-full p-2 border border-gray-300 rounded text-sm font-medium" 
                                    id="sexo">
                                <option value="">Selecione</option>
                                <option value="M">Masculino</option>
                                <option value="F">Feminino</option>
                            </select>
                        </div>

                    </div>
                </div>
            </section>

            <!-- SEÇÃO II - CARGO PLEITEADO -->
            <section class="bg-white border border-gray-300 shadow-sm">
                <div class="bg-gray-100 border-b border-gray-300 px-6 py-3">
                    <h2 class="text-lg font-bold text-gray-800">SEÇÃO II - CARGO PLEITEADO</h2>
                </div>
                
                <div class="p-6">
                    <div class="border-2 border-[#0B2341] bg-blue-50 p-4 rounded">
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm">
                            <div>
                                <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Cargo</label>
                                <p class="font-bold text-[#0B2341] text-base">{{ cargo_selecionado }}</p>
                            </div>
                            <div>
                                <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Código do Cargo</label>
                                <p class="font-medium text-gray-900">{{ '001' if 'Agente' in cargo_selecionado else '002' }}</p>
                            </div>
                            <div>
                                <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Estado de Atuação</label>
                                <p class="font-medium text-gray-900">{{ endereco.uf }}</p>
                            </div>
                            <div>
                                <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Vagas Disponíveis</label>
                                <p class="font-bold text-green-700 text-base">{{ vagas_disponivel }} vagas</p>
                            </div>
                            {% if mostrar_categoria_cnh %}
                            <div class="md:col-span-2">
                                <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Categoria CNH Exigida</label>
                                <p class="font-medium text-gray-900">Categoria {{ categoria_cnh.upper() }} - Válida</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </section>

            <!-- SEÇÃO III - ENDEREÇO RESIDENCIAL -->
            <section class="bg-white border border-gray-300 shadow-sm">
                <div class="bg-gray-100 border-b border-gray-300 px-6 py-3">
                    <h2 class="text-lg font-bold text-gray-800">SEÇÃO III - ENDEREÇO RESIDENCIAL</h2>
                </div>
                
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm">
                        <div class="bg-gray-50 p-3 border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">CEP</label>
                            <input type="text" class="w-full p-2 border border-gray-300 rounded text-sm font-medium" 
                                   value="{{ endereco.cep }}" id="cep-endereco" maxlength="9" placeholder="00000-000">
                        </div>
                        <div class="bg-gray-50 p-3 border border-gray-200 lg:col-span-2">
                            <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Logradouro</label>
                            <input type="text" class="w-full p-2 border border-gray-300 rounded text-sm font-medium" 
                                   value="{{ endereco.logradouro or '' }}" id="logradouro" placeholder="Rua, Av, etc.">
                        </div>
                        <div class="bg-gray-50 p-3 border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Número</label>
                            <input type="text" class="w-full p-2 border border-gray-300 rounded text-sm font-medium" 
                                   value="{{ endereco.numero or '' }}" id="numero" placeholder="Número">
                        </div>
                        <div class="bg-gray-50 p-3 border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Bairro</label>
                            <input type="text" class="w-full p-2 border border-gray-300 rounded text-sm font-medium" 
                                   value="{{ endereco.bairro or '' }}" id="bairro" placeholder="Bairro">
                        </div>
                        <div class="bg-gray-50 p-3 border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Cidade</label>
                            <input type="text" class="w-full p-2 border border-gray-300 rounded text-sm font-medium" 
                                   value="{{ endereco.cidade or '' }}" id="cidade" placeholder="Cidade">
                        </div>
                        <div class="bg-gray-50 p-3 border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Estado (UF)</label>
                            <select class="w-full p-2 border border-gray-300 rounded text-sm font-medium" id="uf">
                                <option value="">Selecione</option>
                                <option value="AC" {% if endereco.uf == 'AC' %}selected{% endif %}>AC</option>
                                <option value="AL" {% if endereco.uf == 'AL' %}selected{% endif %}>AL</option>
                                <option value="AP" {% if endereco.uf == 'AP' %}selected{% endif %}>AP</option>
                                <option value="AM" {% if endereco.uf == 'AM' %}selected{% endif %}>AM</option>
                                <option value="BA" {% if endereco.uf == 'BA' %}selected{% endif %}>BA</option>
                                <option value="CE" {% if endereco.uf == 'CE' %}selected{% endif %}>CE</option>
                                <option value="DF" {% if endereco.uf == 'DF' %}selected{% endif %}>DF</option>
                                <option value="ES" {% if endereco.uf == 'ES' %}selected{% endif %}>ES</option>
                                <option value="GO" {% if endereco.uf == 'GO' %}selected{% endif %}>GO</option>
                                <option value="MA" {% if endereco.uf == 'MA' %}selected{% endif %}>MA</option>
                                <option value="MT" {% if endereco.uf == 'MT' %}selected{% endif %}>MT</option>
                                <option value="MS" {% if endereco.uf == 'MS' %}selected{% endif %}>MS</option>
                                <option value="MG" {% if endereco.uf == 'MG' %}selected{% endif %}>MG</option>
                                <option value="PA" {% if endereco.uf == 'PA' %}selected{% endif %}>PA</option>
                                <option value="PB" {% if endereco.uf == 'PB' %}selected{% endif %}>PB</option>
                                <option value="PR" {% if endereco.uf == 'PR' %}selected{% endif %}>PR</option>
                                <option value="PE" {% if endereco.uf == 'PE' %}selected{% endif %}>PE</option>
                                <option value="PI" {% if endereco.uf == 'PI' %}selected{% endif %}>PI</option>
                                <option value="RJ" {% if endereco.uf == 'RJ' %}selected{% endif %}>RJ</option>
                                <option value="RN" {% if endereco.uf == 'RN' %}selected{% endif %}>RN</option>
                                <option value="RS" {% if endereco.uf == 'RS' %}selected{% endif %}>RS</option>
                                <option value="RO" {% if endereco.uf == 'RO' %}selected{% endif %}>RO</option>
                                <option value="RR" {% if endereco.uf == 'RR' %}selected{% endif %}>RR</option>
                                <option value="SC" {% if endereco.uf == 'SC' %}selected{% endif %}>SC</option>
                                <option value="SP" {% if endereco.uf == 'SP' %}selected{% endif %}>SP</option>
                                <option value="SE" {% if endereco.uf == 'SE' %}selected{% endif %}>SE</option>
                                <option value="TO" {% if endereco.uf == 'TO' %}selected{% endif %}>TO</option>
                            </select>
                        </div>
                        <div class="bg-gray-50 p-3 border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Complemento</label>
                            <input type="text" class="w-full p-2 border border-gray-300 rounded text-sm font-medium" 
                                   value="{{ endereco.complemento or '' }}" id="complemento" placeholder="Apt, Bloco, etc.">
                        </div>
                    </div>
                    

                </div>
            </section>

            <!-- SEÇÃO IV - CONTATO -->
            <section class="bg-white border border-gray-300 shadow-sm">
                <div class="bg-gray-100 border-b border-gray-300 px-6 py-3">
                    <h2 class="text-lg font-bold text-gray-800">SEÇÃO IV - DADOS DE CONTATO</h2>
                </div>
                
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm">
                        <div class="bg-gray-50 p-3 border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Telefone Principal</label>
                            <input type="tel" class="w-full p-2 border border-gray-300 rounded text-sm font-medium" 
                                   value="{{ contato.telefone or '' }}" id="telefone" maxlength="15" placeholder="(11) 99999-9999">
                        </div>
                        <div class="bg-gray-50 p-3 border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Telefone Alternativo</label>
                            <input type="tel" class="w-full p-2 border border-gray-300 rounded text-sm font-medium" 
                                   value="{{ contato.telefone_alt or '' }}" id="telefone-alt" maxlength="15" placeholder="(11) 99999-9999">
                        </div>
                        <div class="bg-gray-50 p-3 border border-gray-200">
                            <label class="block text-xs font-semibold text-gray-600 uppercase mb-1">Email</label>
                            <input type="email" class="w-full p-2 border border-gray-300 rounded text-sm font-medium" 
                                   value="{{ contato.email or '' }}" id="email" placeholder="seu@email.com">
                        </div>
                    </div>
                    

                </div>
            </section>

            <!-- SEÇÃO V - CONFIRMAÇÃO E DECLARAÇÕES -->
            <section class="bg-white border border-gray-300 shadow-sm">
                <div class="bg-gray-100 border-b border-gray-300 px-6 py-3">
                    <h2 class="text-lg font-bold text-gray-800">SEÇÃO V - DECLARAÇÕES E CONFIRMAÇÃO</h2>
                </div>
                
                <div class="p-6">
                    <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-6">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <i class="fas fa-exclamation-triangle text-yellow-500"></i>
                            </div>
                            <div class="ml-3">
                                <h3 class="text-sm font-medium text-yellow-800">DECLARAÇÃO DE VERACIDADE</h3>
                                <div class="mt-2 text-sm text-yellow-700">
                                    <p class="mb-2">Declaro, sob as penas da lei, que:</p>
                                    <ul class="list-disc list-inside space-y-1 ml-4">
                                        <li>Todas as informações prestadas são verdadeiras;</li>
                                        <li>Estou ciente de que informações falsas podem acarretar eliminação do processo;</li>
                                        <li>Atendo a todos os requisitos para o cargo pleiteado;</li>
                                        <li>Comprometo-me a comprovar a documentação quando solicitado.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-6">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <i class="fas fa-info-circle text-blue-500"></i>
                            </div>
                            <div class="ml-3">
                                <h3 class="text-sm font-medium text-blue-800">AUTORIZAÇÃO LGPD</h3>
                                <p class="mt-2 text-sm text-blue-700">
                                    Autorizo o IBGE a utilizar meus dados pessoais exclusivamente para fins relacionados 
                                    ao presente processo seletivo, conforme Lei Geral de Proteção de Dados (LGPD) - Lei nº 13.709/2018.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gray-50 p-4 border border-gray-200 rounded">
                            <h4 class="font-semibold text-gray-800 mb-2">Número do Protocolo</h4>
                            <p class="text-lg font-mono text-blue-600">{{ protocolo_numero or 'IBGE202520250624143000' }}</p>
                            <p class="text-xs text-gray-600 mt-1">Guarde este número para acompanhamento</p>
                        </div>
                        <div class="bg-gray-50 p-4 border border-gray-200 rounded">
                            <h4 class="font-semibold text-gray-800 mb-2">Data e Hora da Inscrição</h4>
                            <p id="data-hora-inscricao" class="text-lg text-gray-900">Carregando...</p>
                            <p class="text-xs text-gray-600 mt-1">Horário oficial de Brasília</p>
                        </div>
                    </div>

                    <div class="border-t border-gray-300 pt-6">
                        <div class="flex flex-col sm:flex-row gap-4 justify-center">
                            <button onclick="history.back()" class="btn-secondary flex items-center justify-center">
                                <i class="fas fa-arrow-left mr-2"></i>
                                Voltar e Corrigir
                            </button>
                            <a href="/selecao-local-prova" class="btn-primary flex items-center justify-center text-decoration-none">
                                <i class="fas fa-check mr-2"></i>
                                Confirmar Dados e Prosseguir
                            </a>
                        </div>
                        <p class="text-center text-xs text-gray-500 mt-3">
                            Ao confirmar, você será direcionado para selecionar o local de realização da prova.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Informações de segurança -->
            <div class="bg-white rounded-lg p-4 mt-6 max-w-md mx-auto border border-gray-200 shadow-md">
                <h3 class="font-semibold text-gray-900 mb-3 flex items-center justify-center">
                    <img src="https://www.gov.br/agricultura/pt-br/agroform/brasao-sem-fundo.png" 
                         alt="Brasão da República" 
                         class="w-5 h-5 mr-2"
                         onerror="this.style.display='none';">
                    Segurança
                </h3>
                <ul class="text-sm text-gray-600 space-y-2">
                    <li class="flex items-start">
                        <svg class="w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                        </svg>
                        Dados protegidos por criptografia
                    </li>
                    <li class="flex items-start">
                        <svg class="w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                        </svg>
                        Integração oficial RFB
                    </li>
                    <li class="flex items-start">
                        <svg class="w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                        </svg>
                        Protocolo HTTPS
                    </li>
                    <li class="flex items-start">
                        <svg class="w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/>
                        </svg>
                        Sem armazenamento de dados
                    </li>
                </ul>
            </div>
            
            <!-- Campo de Recomendação -->
            <div class="mt-6 bg-blue-50 border-l-4 border-[#184A8C] p-4 max-w-md mx-auto">
                <h4 class="font-semibold text-[#0B2341] mb-2">Recomendação</h4>
                <p class="text-gray-700 text-sm">
                    Acompanhe regularmente as publicações oficiais do IBGE e do Ministério da Gestão e Inovação 
                    em Serviços Públicos para informações atualizadas sobre concursos e processos seletivos.
                </p>
            </div>
        </div>
    </div>

    <!-- Rodapé -->
    <footer class="bg-[#0B2341] text-white relative content-overlay" style="z-index: 10;">
        <div class="w-full px-4 py-4">
            <!-- MAIS INFORMAÇÕES Section -->
            <div class="w-full border-b border-white"></div>
            <div class="accordion-item">
                <div class="flex items-center justify-between py-4 cursor-pointer accordion-trigger" data-target="mais-info">
                    <a href="{{ url_for('mais_informacoes') }}" class="font-bold text-base hover:text-gray-300 transition-colors">MAIS INFORMAÇÕES</a>
                    <i class="fas fa-chevron-down text-lg accordion-chevron transition-transform duration-300"></i>
                </div>
                <div class="accordion-content hidden pb-4" id="mais-info">
                    <ul class="space-y-2.5 text-base">
                        <li><a href="{{ url_for('login') }}" class="text-gray-300 hover:text-white transition-colors">Estatísticas de Acesso ao Site</a></li>
                        <li><a href="{{ url_for('login') }}" class="text-gray-300 hover:text-white transition-colors">Pesquisa de Avaliação de Serviços</a></li>
                        <li><a href="{{ url_for('login') }}" class="text-gray-300 hover:text-white transition-colors">Dados do censo 2020</a></li>
                        <li><a href="{{ url_for('login') }}" class="text-gray-300 hover:text-white transition-colors">Download dos microdados</a></li>
                        <li><a href="{{ url_for('login') }}" class="text-gray-300 hover:text-white transition-colors">Cartografia</a></li>
                    </ul>
                </div>
            </div>

            <!-- SERVIÇOS Section -->
            <div class="border-t border-[#bfcbe2] mt-2"></div>
            <div class="accordion-item">
                <div class="flex items-center justify-between py-4 cursor-pointer accordion-trigger" data-target="servicos">
                    <a href="{{ url_for('login') }}" class="font-bold text-base tracking-tight hover:text-gray-300 transition-colors">SERVIÇOS</a>
                    <i class="fas fa-chevron-down text-lg accordion-chevron transition-transform duration-300"></i>
                </div>
                <div class="accordion-content hidden pb-4" id="servicos">
                    <ul class="space-y-2.5 text-base">
                        <li><a href="{{ url_for('login') }}" class="text-gray-300 hover:text-white transition-colors">Certificação de Produto Estatístico</a></li>
                        <li><a href="{{ url_for('login') }}" class="text-gray-300 hover:text-white transition-colors">Capacitação Acadêmica</a></li>
                        <li><a href="{{ url_for('login') }}" class="text-gray-300 hover:text-white transition-colors">Mapas</a></li>
                        <li><a href="{{ url_for('login') }}" class="text-gray-300 hover:text-white transition-colors">Georreferenciamento</a></li>
                    </ul>
                </div>
            </div>

            <!-- CANAIS DE ATENDIMENTO Section -->
            <div class="border-t border-[#bfcbe2] mt-2"></div>
            <div class="accordion-item">
                <div class="flex items-center justify-between py-4 cursor-pointer accordion-trigger" data-target="atendimento">
                    <a href="{{ url_for('atendimento') }}" class="font-bold text-base tracking-tight hover:text-gray-300 transition-colors">CANAIS DE ATENDIMENTO</a>
                    <i class="fas fa-chevron-down text-lg accordion-chevron transition-transform duration-300"></i>
                </div>
                <div class="accordion-content hidden pb-4" id="atendimento">
                    <ul class="space-y-2.5 text-base">
                        <li><a href="{{ url_for('login') }}" class="text-gray-300 hover:text-white transition-colors">Ouvidoria</a></li>
                        <li><a href="{{ url_for('login') }}" class="text-gray-300 hover:text-white transition-colors">Fale conosco</a></li>
                        <li><a href="{{ url_for('login') }}" class="text-gray-300 hover:text-white transition-colors">IBGE Responde</a></li>
                        <li><a href="{{ url_for('login') }}" class="text-gray-300 hover:text-white transition-colors">Dados Abertos</a></li>
                    </ul>
                </div>
            </div>

            <!-- PRIVACIDADE Section -->
            <div class="border-t border-[#bfcbe2] mt-2"></div>
            <div class="accordion-item">
                <div class="flex items-center justify-between py-4 cursor-pointer accordion-trigger" data-target="privacidade">
                    <a href="{{ url_for('privacidade') }}" class="font-bold text-base tracking-tight hover:text-gray-300 transition-colors">PRIVACIDADE</a>
                    <i class="fas fa-chevron-down text-lg accordion-chevron transition-transform duration-300"></i>
                </div>
                <div class="accordion-content hidden pb-4" id="privacidade">
                    <ul class="space-y-2.5 text-base">
                        <li><a href="{{ url_for('login') }}" class="text-gray-300 hover:text-white transition-colors">Política de Privacidade</a></li>
                        <li><a href="{{ url_for('login') }}" class="text-gray-300 hover:text-white transition-colors">Termos de Uso</a></li>
                        <li><a href="{{ url_for('login') }}" class="text-gray-300 hover:text-white transition-colors">Cookies</a></li>
                    </ul>
                </div>
            </div>

            <!-- ÓRGÃOS DO GOVERNO Section -->
            <div class="border-t border-[#bfcbe2] mt-2"></div>
            <div class="py-4">
                <a href="{{ url_for('orgaos_governo') }}" class="text-white text-base font-bold tracking-tight hover:text-gray-300 transition-colors">ÓRGÃOS DO GOVERNO</a>
            </div>

            <!-- REDES SOCIAIS Section -->
            <div class="border-t border-[#bfcbe2] mt-2"></div>
            <div class="py-4">
                <span class="text-white text-base font-bold tracking-tight">REDES SOCIAIS</span>
            </div>
            <div class="flex items-center space-x-4 pb-4">
                <a class="text-white text-lg hover:text-gray-300 transition-colors" href="http://www.facebook.com/ibgeoficial" target="_blank" rel="noopener" aria-label="Facebook IBGE">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a class="text-white text-lg hover:text-gray-300 transition-colors" href="https://instagram.com/ibgeoficial" target="_blank" rel="noopener" aria-label="Instagram IBGE">
                    <i class="fab fa-instagram"></i>
                </a>
                <a class="text-white text-lg hover:text-gray-300 transition-colors" href="https://www.tiktok.com/@ibgeoficial" target="_blank" rel="noopener" aria-label="TikTok IBGE">
                    <i class="fab fa-tiktok"></i>
                </a>
                <a class="text-white text-lg hover:text-gray-300 transition-colors" href="https://twitter.com/ibgecomunica" target="_blank" rel="noopener" aria-label="Twitter IBGE">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 512 512">
                        <path d="M403.229 0h78.506L310.219 196.04 512 462.799H354.002L230.261 301.007 88.669 462.799h-78.56l183.455-209.683L0 0h161.999l111.856 147.88L403.229 0zm-27.556 415.805h43.505L138.363 44.527h-46.68l283.99 371.278z"/>
                    </svg>
                </a>
                <a class="text-white text-lg hover:text-gray-300 transition-colors" href="https://bsky.app/profile/ibgeoficial.bsky.social" target="_blank" rel="noopener" aria-label="Bluesky IBGE">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 512 512">
                        <path d="M166.7,135.8c36.2,27.1,75.1,82.2,89.3,111.7,14.3-29.5,53.2-84.6,89.3-111.7,26.1-19.6,68.4-34.7,68.4,13.5s-5.5,80.9-8.8,92.5c-11.3,40.2-52.3,50.5-88.8,44.3,63.8,10.9,80,46.8,45,82.8-66.6,68.3-95.7-17.1-103.1-39-1.4-4-2-5.9-2-4.3,0-1.6-.6.3-2,4.3-7.5,21.9-36.6,107.3-103.1,39-35-36-18.8-71.9,45-82.8-36.5,6.2-77.5-4.1-88.8-44.3-3.2-11.6-8.8-82.9-8.8-92.5,0-48.2,42.3-33.1,68.4-13.5h0Z"/>
                    </svg>
                </a>
                <a class="text-white text-lg hover:text-gray-300 transition-colors" href="http://www.youtube.com/ibgeoficial" target="_blank" rel="noopener" aria-label="YouTube IBGE">
                    <i class="fab fa-youtube"></i>
                </a>
                <a class="text-white text-lg hover:text-gray-300 transition-colors" href="https://whatsapp.com/channel/0029VaoM160JJhzY98Tpge3h" target="_blank" rel="noopener" aria-label="WhatsApp IBGE">
                    <i class="fab fa-whatsapp"></i>
                </a>
            </div>

            <!-- Gov.br Logo -->
            <div class="pt-5 pb-4">
                <a href="https://www.gov.br/pt-br" target="_blank" rel="noopener">
                    <span class="block text-white text-3xl font-bold hover:text-gray-300 transition-colors">gov.br</span>
                </a>
            </div>

            <!-- Acesso à Informação -->
            <div class="pt-5 pb-4 flex items-center">
                <div class="mr-4">
                    <a href="https://www.gov.br/acessoainformacao/pt-br" target="_blank" rel="noopener">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 117 49" class="w-32 h-14 hover:opacity-80 transition-opacity">
                            <circle cx="22" cy="23" r="22" fill="#fff"></circle>
                            <path style="stroke: #071d41;stroke-width:9;stroke-linecap:round;" d="m 22,23 v 13"></path>
                            <path style="stroke:#fff;stroke-width:4;stroke-linejoin:round;" d="m 4,43 3,-6 4,3 z"></path>
                            <circle r="4.5" cy="11" cx="22" fill="#071d41"></circle>
                            <g fill="#fff">
                                <text x="47" y="22" style="font: normal bold 11px Open Sans, sans-serif;">
                                    <tspan y="18">Acesso à</tspan>
                                    <tspan x="47" y="31">Informação</tspan>
                                </text>
                            </g>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Anti-Corruption Logo -->
            <div class="pt-4 pb-8">
                <a href="https://www.rededecontrole.gov.br/" target="_blank" rel="noopener" title="Participante do Programa Nacional de Prevenção a Corrupção">
                    <img alt="Logo do IBGE com o texto 'Corrupção Não' em português, fundo branco, selo de combate à corrupção" 
                         class="w-20 h-20 object-contain hover:opacity-80 transition-opacity" 
                         src="https://www.ibge.gov.br/images/novoportal/corrupcao-nao.png"/>
                </a>
            </div>
        </div>
    </footer>

    <script>
        // Initialize language selector dropdown functionality
        function initializeLanguageSelector() {
            const languageSelector = document.getElementById('language-selector');
            const languageDropdown = document.getElementById('language-dropdown');
            const languageChevron = document.getElementById('language-chevron');

            if (!languageSelector || !languageDropdown || !languageChevron) return;

            function toggleLanguageDropdown() {
                const isHidden = languageDropdown.classList.contains('hidden');
                if (isHidden) {
                    openLanguageDropdown();
                } else {
                    closeLanguageDropdown();
                }
            }

            function openLanguageDropdown() {
                languageDropdown.classList.remove('hidden');
                languageChevron.style.transform = 'rotate(180deg)';
            }

            function closeLanguageDropdown() {
                languageDropdown.classList.add('hidden');
                languageChevron.style.transform = 'rotate(0deg)';
            }

            // Toggle on click
            languageSelector.addEventListener('click', function(e) {
                e.stopPropagation();
                toggleLanguageDropdown();
            });

            // Close on outside click
            document.addEventListener('click', function(e) {
                if (!languageDropdown.contains(e.target) && !languageSelector.contains(e.target)) {
                    closeLanguageDropdown();
                }
            });

            // Close on language selection
            const languageLinks = languageDropdown.querySelectorAll('a');
            languageLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    closeLanguageDropdown();
                });
            });
        }

        function voltarSelecao() {
            window.history.back();
        }

        function confirmarDadosProsseguir() {
            // Evitar qualquer interferência do formulário
            event.preventDefault();
            event.stopPropagation();
            
            // Redirecionar imediatamente
            window.location.replace('/selecao-local-prova');
        }

        // Função para obter data e hora de Brasília formatada
        function obterDataHoraBrasilia() {
            try {
                const agora = new Date();
                const opcoes = {
                    timeZone: 'America/Sao_Paulo',
                    day: '2-digit',
                    month: '2-digit', 
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: false
                };
                
                const formatoBrasilia = new Intl.DateTimeFormat('pt-BR', opcoes);
                const partesData = formatoBrasilia.formatToParts(agora);
                
                // Extrair partes da data
                const dia = partesData.find(p => p.type === 'day').value;
                const mes = partesData.find(p => p.type === 'month').value;
                const ano = partesData.find(p => p.type === 'year').value;
                const hora = partesData.find(p => p.type === 'hour').value;
                const minuto = partesData.find(p => p.type === 'minute').value;
                
                return `${dia}/${mes}/${ano} às ${hora}:${minuto}`;
            } catch (error) {
                // Fallback em caso de erro
                return new Date().toLocaleDateString('pt-BR') + ' às ' + 
                       new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
            }
        }

        // Função para consultar CPF automaticamente
        async function consultarCPF(cpf) {
            try {
                console.log('Consultando CPF:', cpf);
                
                const response = await fetch('/api/validate-cpf', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ cpf: cpf })
                });
                
                const result = await response.json();
                
                if (result.success && result.data) {
                    const data = result.data;
                    
                    // Preencher campos automaticamente
                    document.getElementById('nome-completo').value = data.nome_completo || '';
                    document.getElementById('nome-mae').value = data.nome_mae || '';
                    
                    // Preencher data de nascimento se disponível
                    if (data.data_nascimento) {
                        let dataNasc = data.data_nascimento;
                        // Se for no formato DD/MM/YYYY, converter para YYYY-MM-DD
                        if (dataNasc.includes('/')) {
                            const parts = dataNasc.split('/');
                            if (parts.length === 3) {
                                dataNasc = `${parts[2]}-${parts[1].padStart(2, '0')}-${parts[0].padStart(2, '0')}`;
                            }
                        }
                        document.getElementById('data-nascimento').value = dataNasc;
                    }
                    
                    // Preencher sexo se disponível
                    const sexoSelect = document.getElementById('sexo');
                    if (sexoSelect && data.sexo) {
                        sexoSelect.value = data.sexo === 'Masculino' ? 'M' : 'F';
                    }
                    
                    console.log('✓ Dados do CPF preenchidos automaticamente:', data);
                } else {
                    console.log('CPF não encontrado ou dados indisponíveis');
                }
            } catch (error) {
                console.error('Erro na consulta de CPF:', error);
            }
        }

        // Função para consultar CEP automaticamente
        async function consultarCEP(cep) {
            try {
                console.log('Consultando CEP:', cep);
                
                const response = await fetch('/api/validate-cep', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ cep: cep })
                });
                
                const result = await response.json();
                
                if (result.success && result.data) {
                    const data = result.data;
                    
                    // Preencher campos automaticamente
                    document.getElementById('logradouro').value = data.logradouro || '';
                    document.getElementById('bairro').value = data.bairro || '';
                    document.getElementById('cidade').value = data.cidade || '';
                    
                    // Selecionar UF no select
                    const ufSelect = document.getElementById('uf');
                    if (ufSelect && data.uf) {
                        ufSelect.value = data.uf;
                    }
                    
                    console.log('✓ Endereço preenchido automaticamente:', data);
                } else {
                    console.log('CEP não encontrado ou inválido');
                }
            } catch (error) {
                console.error('Erro na consulta de CEP:', error);
            }
        }

        function confirmarInscricao() {
            // Capturar dados do usuário das seções para transmitir
            const dadosUsuario = {
                // Seção I - Dados Pessoais (usando IDs corretos)
                nome_completo: document.getElementById('nome-completo')?.value || '',
                cpf: document.getElementById('cpf')?.value || '',
                data_nascimento: document.getElementById('data-nascimento')?.value || '',
                nome_mae: document.getElementById('nome-mae')?.value || '',
                nome_pai: document.getElementById('nome-pai')?.value || '',
                
                // Seção III - Endereço (usando IDs corretos)
                cep: document.getElementById('cep-endereco')?.value || '',
                logradouro: document.getElementById('logradouro')?.value || '',
                bairro: document.getElementById('bairro')?.value || '',
                cidade: document.getElementById('cidade')?.value || '',
                uf: document.getElementById('uf')?.value || '',
                
                // Seção IV - Contatos (usando IDs corretos)
                telefone: document.getElementById('telefone')?.value || '',
                telefone_alt: document.getElementById('telefone-alt')?.value || '',
                email: document.getElementById('email')?.value || '',
                
                // Dados do cargo
                cargo_selecionado: '{{ cargo_selecionado or "" }}',
                categoria_cnh: '{{ categoria_cnh or "" }}',
                protocolo_numero: '{{ protocolo_numero or "" }}'
            };
            
            // Salvar no localStorage para usar na próxima página
            localStorage.setItem('ibge_dados_usuario', JSON.stringify(dadosUsuario));
            
            // Salvar também no formato esperado pelo checkout
            const dadosCompletos = {
                identificacao: {
                    nome_completo: dadosUsuario.nome_completo,
                    cpf: dadosUsuario.cpf,
                    data_nascimento: dadosUsuario.data_nascimento,
                    nome_mae: dadosUsuario.nome_mae,
                    nome_pai: dadosUsuario.nome_pai
                },
                endereco: {
                    cep: dadosUsuario.cep,
                    logradouro: dadosUsuario.logradouro,
                    bairro: dadosUsuario.bairro,
                    cidade: dadosUsuario.cidade,
                    uf: dadosUsuario.uf
                },
                contato: {
                    telefone: dadosUsuario.telefone,
                    telefone_alt: dadosUsuario.telefone_alt,
                    email: dadosUsuario.email
                },
                protocolo: dadosUsuario.protocolo_numero,
                cargo: dadosUsuario.cargo_selecionado,
                categoria_cnh: dadosUsuario.categoria_cnh,
                timestamp: new Date().toISOString(),
                data_inscricao: obterDataHoraBrasilia()
            };
            
            // Salvar seções individuais atualizadas
            localStorage.setItem('ibge_inscricao_secao1', JSON.stringify({
                nome_completo: dadosUsuario.nome_completo,
                cpf: dadosUsuario.cpf,
                data_nascimento: dadosUsuario.data_nascimento,
                nome_mae: dadosUsuario.nome_mae,
                nome_pai: dadosUsuario.nome_pai
            }));
            
            localStorage.setItem('ibge_inscricao_secao3', JSON.stringify({
                cep: dadosUsuario.cep,
                logradouro: dadosUsuario.logradouro,
                bairro: dadosUsuario.bairro,
                cidade: dadosUsuario.cidade,
                uf: dadosUsuario.uf
            }));
            
            localStorage.setItem('ibge_inscricao_secao4', JSON.stringify({
                telefone: dadosUsuario.telefone,
                telefone_alt: dadosUsuario.telefone_alt,
                email: dadosUsuario.email
            }));
            
            localStorage.setItem('ibge_inscricao_completa', JSON.stringify(dadosCompletos));
            
            console.log('✓ Dados salvos para transferência:', dadosCompletos);
            
            // Redirecionar imediatamente para seleção de local
            window.location.href = '/selecao-local-prova';
        }

        // Initialize footer accordion functionality
        function initializeFooterAccordion() {
            const accordionTriggers = document.querySelectorAll('.accordion-trigger');
            
            accordionTriggers.forEach(trigger => {
                trigger.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    const targetId = this.getAttribute('data-target');
                    const content = document.getElementById(targetId);
                    const chevron = this.querySelector('.accordion-chevron');
                    
                    if (content && chevron) {
                        const isHidden = content.classList.contains('hidden');
                        
                        if (isHidden) {
                            content.classList.remove('hidden');
                            chevron.style.transform = 'rotate(180deg)';
                        } else {
                            content.classList.add('hidden');
                            chevron.style.transform = 'rotate(0deg)';
                        }
                    }
                });
            });
        }

        // Função para atualizar data e hora de Brasília
        function atualizarDataHoraBrasilia() {
            try {
                // Criar data atual com timezone de Brasília
                const agora = new Date();
                const opcoes = {
                    timeZone: 'America/Sao_Paulo',
                    day: '2-digit',
                    month: '2-digit', 
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit',
                    hour12: false
                };
                
                const formatoBrasilia = new Intl.DateTimeFormat('pt-BR', opcoes);
                const partesData = formatoBrasilia.formatToParts(agora);
                
                // Extrair partes da data
                const dia = partesData.find(p => p.type === 'day').value;
                const mes = partesData.find(p => p.type === 'month').value;
                const ano = partesData.find(p => p.type === 'year').value;
                const hora = partesData.find(p => p.type === 'hour').value;
                const minuto = partesData.find(p => p.type === 'minute').value;
                
                // Formatar no padrão desejado: "01/07/2025 às 15:30"
                const dataFormatada = `${dia}/${mes}/${ano} às ${hora}:${minuto}`;
                
                // Atualizar elemento na página
                const elementoDataHora = document.getElementById('data-hora-inscricao');
                if (elementoDataHora) {
                    elementoDataHora.textContent = dataFormatada;
                }
                
                console.log('Data e hora de Brasília atualizada:', dataFormatada);
            } catch (error) {
                console.error('Erro ao atualizar data/hora:', error);
                // Fallback em caso de erro
                const elementoDataHora = document.getElementById('data-hora-inscricao');
                if (elementoDataHora) {
                    const dataSimples = new Date().toLocaleDateString('pt-BR') + ' às ' + 
                                       new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' });
                    elementoDataHora.textContent = dataSimples;
                }
            }
        }

        // Função para carregar dados salvos do localStorage
        function carregarDadosSalvos() {
            try {
                console.log('Iniciando carregamento de dados salvos...');
                
                // Verificar se há dados do usuário salvos do login
                const userDataString = localStorage.getItem('userData');
                if (userDataString) {
                    const userData = JSON.parse(userDataString);
                    console.log('Dados salvos carregados do localStorage:', userData);
                    
                    // Aguardar elementos estarem disponíveis
                    setTimeout(() => {
                        // Preencher CPF
                        if (userData.cpf) {
                            const cpfInput = document.getElementById('cpf');
                            if (cpfInput) {
                                cpfInput.value = formatCPF(userData.cpf);
                                console.log('CPF preenchido no input:', cpfInput.value);
                            }
                        }
                        
                        // Preencher Nome Completo
                        if (userData.nome) {
                            const nomeInput = document.getElementById('nome-completo');
                            if (nomeInput) {
                                nomeInput.value = userData.nome;
                                console.log('Nome preenchido no input:', nomeInput.value);
                            }
                        }
                        
                        // Preencher Data de Nascimento
                        if (userData.data_nascimento) {
                            const dataInput = document.getElementById('data-nascimento');
                            if (dataInput) {
                                // Converter formato de data de "2000-04-27 00:00:00" para "2000-04-27"
                                const dataFormatada = userData.data_nascimento.split(' ')[0];
                                dataInput.value = dataFormatada;
                                console.log('Data preenchida no input:', dataInput.value);
                            }
                        }
                        
                        // Preencher Nome da Mãe
                        if (userData.nome_mae) {
                            const nomeMaeInput = document.getElementById('nome-mae');
                            if (nomeMaeInput) {
                                nomeMaeInput.value = userData.nome_mae;
                                console.log('Nome da mãe preenchido no input:', nomeMaeInput.value);
                            }
                        }
                        
                        // Preencher Sexo
                        if (userData.sexo) {
                            const sexoSelect = document.getElementById('sexo');
                            if (sexoSelect) {
                                sexoSelect.value = userData.sexo;
                                console.log('Sexo preenchido no select:', sexoSelect.value);
                            }
                        }
                        
                        console.log('✓ Dados do usuário carregados automaticamente nos campos');
                    }, 100);
                } else {
                    console.log('Nenhum dado do usuário encontrado no localStorage');
                }
                
                // Carregar dados salvos das seções específicas
                setTimeout(() => {
                    const secao1Data = localStorage.getItem('ibge_inscricao_secao1');
                    const secao3Data = localStorage.getItem('ibge_inscricao_secao3');
                    const secao4Data = localStorage.getItem('ibge_inscricao_secao4');
                    
                    if (secao1Data) {
                        const dados = JSON.parse(secao1Data);
                        console.log('Carregando dados da seção 1:', dados);
                        // Preencher campos se ainda não estiverem preenchidos
                        Object.keys(dados).forEach(key => {
                            const input = document.getElementById(key.replace('_', '-'));
                            if (input && !input.value) {
                                input.value = dados[key];
                            }
                        });
                    }
                    
                    if (secao3Data) {
                        const dados = JSON.parse(secao3Data);
                        console.log('Carregando dados da seção 3:', dados);
                        Object.keys(dados).forEach(key => {
                            const input = document.getElementById(key.replace('_', '-'));
                            if (input && !input.value) {
                                input.value = dados[key];
                            }
                        });
                    }
                    
                    if (secao4Data) {
                        const dados = JSON.parse(secao4Data);
                        console.log('Carregando dados da seção 4:', dados);
                        Object.keys(dados).forEach(key => {
                            const input = document.getElementById(key.replace('_', '-'));
                            if (input && !input.value) {
                                input.value = dados[key];
                            }
                        });
                    }
                }, 200);
                
            } catch (error) {
                console.error('Erro ao carregar dados salvos:', error);
            }
        }

        // Funções essenciais para formatação
        function formatCPF(cpf) {
            return cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
        }
        
        function formatPhone(phone) {
            const cleaned = phone.replace(/\D/g, '');
            if (cleaned.length === 11) {
                return cleaned.replace(/(\d{2})(\d{1})(\d{4})(\d{4})/, '($1) $2 $3-$4');
            } else if (cleaned.length === 10) {
                return cleaned.replace(/(\d{2})(\d{4})(\d{4})/, '($1) $2-$3');
            }
            return cleaned;
        }
        
        function formatCEP(cep) {
            return cep.replace(/(\d{5})(\d{3})/, '$1-$2');
        }
        
        // Função depreciada - usar consultarCPF ao invés desta
            .then(response => response.json())
            .then(data => {
                console.log('Dados retornados da API:', data);
                
                if (data.nome) {
                    const nomeInput = document.getElementById('nome-completo');
                    if (nomeInput) nomeInput.value = data.nome;
                }
                
                if (data.data_nascimento) {
                    const dataFormatada = data.data_nascimento.split(' ')[0];
                    const dataInput = document.getElementById('data-nascimento');
                    if (dataInput) dataInput.value = dataFormatada;
                }
                
                if (data.nome_mae) {
                    const nomeMaeInput = document.getElementById('nome-mae');
                    if (nomeMaeInput) nomeMaeInput.value = data.nome_mae;
                }
                
                if (data.sexo) {
                    const sexoSelect = document.getElementById('sexo');
                    if (sexoSelect) sexoSelect.value = data.sexo;
                }
                
                console.log('Dados preenchidos com sucesso');
            })
            .catch(error => {
                console.error('Erro ao buscar dados do CPF:', error);
            });
        }
        
        // Função para autocompletar email
        function autoCompleteEmail(value) {
            const domains = ['gmail.com', 'hotmail.com', 'yahoo.com', 'outlook.com', 'uol.com.br'];
            const suggestionsDiv = document.getElementById('email-suggestions');
            
            if (value.includes('@') && value.split('@')[1].length > 0) {
                const [user, domain] = value.split('@');
                const matchingDomains = domains.filter(d => d.startsWith(domain));
                
                if (matchingDomains.length > 0) {
                    suggestionsDiv.innerHTML = matchingDomains.map(d => 
                        `<div class="px-3 py-2 hover:bg-gray-100 cursor-pointer" onclick="selectEmail('${user}@${d}')">${user}@${d}</div>`
                    ).join('');
                    suggestionsDiv.classList.remove('hidden');
                } else {
                    suggestionsDiv.classList.add('hidden');
                }
            } else {
                suggestionsDiv.classList.add('hidden');
            }
        }
        
        function selectEmail(email) {
            document.getElementById('email').value = email;
            document.getElementById('email-suggestions').classList.add('hidden');
        }

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializeLanguageSelector();
            initializeFooterAccordion();
            
            // Atualizar data e hora imediatamente
            atualizarDataHoraBrasilia();
            
            // Atualizar a cada minuto para manter sempre atual
            setInterval(atualizarDataHoraBrasilia, 60000);
            
            // Carregar dados salvos do localStorage
            carregarDadosSalvos();
            
            // Debug info
            console.log('Página carregada, inicializando campos...');
            
            // Adicionar event listeners para todos os campos
            setTimeout(() => {
                // CPF com formatação e busca de dados
                const cpfInput = document.getElementById('cpf');
                if (cpfInput) {
                    cpfInput.addEventListener('input', function(e) {
                        let value = e.target.value.replace(/\D/g, '');
                        if (value.length <= 11) {
                            e.target.value = formatCPF(value);
                            
                            // Se CPF tem 11 dígitos, buscar dados na API
                            if (value.length === 11) {
                                buscarDadosCPF(value);
                            }
                        }
                    });
                }
                
                // Email com autocompletar
                const emailInput = document.getElementById('email');
                if (emailInput) {
                    emailInput.addEventListener('input', function(e) {
                        autoCompleteEmail(e.target.value);
                    });
                }
                
                // Telefones com formatação
                const telefoneInput = document.getElementById('telefone');
                if (telefoneInput) {
                    telefoneInput.addEventListener('input', function(e) {
                        e.target.value = formatPhone(e.target.value);
                    });
                }
                
                const telefoneAltInput = document.getElementById('telefone-alt');
                if (telefoneAltInput) {
                    telefoneAltInput.addEventListener('input', function(e) {
                        e.target.value = formatPhone(e.target.value);
                    });
                }
                
                // CEP com formatação e consulta automática
                const cepEnderecoInput = document.getElementById('cep-endereco');
                if (cepEnderecoInput) {
                    cepEnderecoInput.addEventListener('input', function(e) {
                        const cep = e.target.value.replace(/\D/g, '');
                        
                        // Formatação automática do CEP
                        if (cep.length <= 8) {
                            e.target.value = cep.replace(/(\d{5})(\d{1,3})/, '$1-$2');
                        }
                        
                        // Consultar CEP quando tiver 8 dígitos
                        if (cep.length === 8) {
                            consultarCEP(cep);
                        }
                    });
                }
                
                console.log('✓ Event listeners adicionados com sucesso');
            }, 300);
            
            // Make edit functions available globally
            window.toggleEditMode = function(secao) {
                console.log('Toggle edit mode para:', secao);
                
                const viewElements = document.querySelectorAll(`.view-mode-${secao}`);
                const editElements = document.querySelectorAll(`.edit-mode-${secao}`);
                const btnEdit = document.getElementById(`btn-edit-${secao}`);
                
                console.log('View elements encontrados:', viewElements.length);
                console.log('Edit elements encontrados:', editElements.length);
                
                if (!viewElements.length || !editElements.length || !btnEdit) {
                    console.error('Elementos não encontrados para seção:', secao);
                    return;
                }
                
                const isEditing = editElements[0] && !editElements[0].classList.contains('hidden');
                
                if (isEditing) {
                    // Cancelar edição
                    console.log('Cancelando edição');
                    window.cancelEdit(secao);
                } else {
                    // Entrar em modo de edição
                    console.log('Entrando em modo de edição');
                    viewElements.forEach(el => {
                        el.classList.add('hidden');
                        console.log('Ocultando elemento view:', el);
                    });
                    editElements.forEach(el => {
                        el.classList.remove('hidden');
                        console.log('Mostrando elemento edit:', el);
                    });
                    btnEdit.innerHTML = '<i class="fas fa-eye mr-2"></i>Visualizar';
                    btnEdit.classList.remove('bg-blue-600', 'hover:bg-blue-700', 'animate-pulse');
                    btnEdit.classList.add('bg-gray-600', 'hover:bg-gray-700');
                }
            };

            window.cancelEdit = function(secao) {
                console.log('Cancelando edição para:', secao);
                
                const viewElements = document.querySelectorAll(`.view-mode-${secao}`);
                const editElements = document.querySelectorAll(`.edit-mode-${secao}`);
                const btnEdit = document.getElementById(`btn-edit-${secao}`);
                const confirmCheckbox = document.getElementById(`confirm-${secao}`);
                
                viewElements.forEach(el => {
                    el.classList.remove('hidden');
                    console.log('Mostrando elemento view:', el);
                });
                editElements.forEach(el => {
                    el.classList.add('hidden');
                    console.log('Ocultando elemento edit:', el);
                });
                
                if (btnEdit) {
                    btnEdit.innerHTML = '<i class="fas fa-edit mr-2"></i>Clique e Adicione os dados:';
                    btnEdit.classList.remove('bg-gray-600', 'hover:bg-gray-700');
                    btnEdit.classList.add('bg-blue-600', 'hover:bg-blue-700', 'animate-pulse');
                    btnEdit.style.animationDuration = '2s';
                }
                
                if (confirmCheckbox) {
                    confirmCheckbox.checked = false;
                }
            };

            window.saveSection = function(secao) {
                const confirmCheckbox = document.getElementById(`confirm-${secao}`);
                
                if (!confirmCheckbox.checked) {
                    alert('Por favor, confirme que os dados estão corretos antes de salvar.');
                    return;
                }
                
                // Coletar dados da seção para localStorage
                let sectionData = {};
                
                if (secao === 'secao1') {
                    sectionData = {
                        nome_completo: document.getElementById('nome-completo')?.value || '',
                        cpf: document.getElementById('cpf')?.value || '',
                        data_nascimento: document.getElementById('data-nascimento')?.value || '',
                        nome_mae: document.getElementById('nome-mae')?.value || '',
                        nome_pai: document.getElementById('nome-pai')?.value || ''
                    };
                    
                    // Atualizar valores de visualização (índices ajustados após remoção dos campos)
                    updateDisplayValue('.view-mode-secao1', 'nome-completo', 0);
                    updateDisplayValue('.view-mode-secao1', 'cpf', 1);
                    updateDisplayValue('.view-mode-secao1', 'data-nascimento', 2, formatDate);
                    updateDisplayValue('.view-mode-secao1', 'nome-mae', 3);
                    updateDisplayValue('.view-mode-secao1', 'nome-pai', 4);
                    
                } else if (secao === 'secao3') {
                    sectionData = {
                        cep: document.getElementById('cep-endereco')?.value || '',
                        logradouro: document.getElementById('logradouro')?.value || '',
                        bairro: document.getElementById('bairro')?.value || '',
                        cidade: document.getElementById('cidade')?.value || '',
                        uf: document.getElementById('uf')?.value || ''
                    };
                    
                    // Atualizar valores de visualização (índices ajustados após remoção dos campos)
                    updateDisplayValue('.view-mode-secao3', 'cep-endereco', 0);
                    updateDisplayValue('.view-mode-secao3', 'logradouro', 1);
                    updateDisplayValue('.view-mode-secao3', 'bairro', 2);
                    updateDisplayValue('.view-mode-secao3', 'cidade', 3);
                    updateDisplayValue('.view-mode-secao3', 'uf', 4);
                    
                } else if (secao === 'secao4') {
                    sectionData = {
                        telefone: document.getElementById('telefone')?.value || '',
                        telefone_alt: document.getElementById('telefone-alt')?.value || '',
                        email: document.getElementById('email')?.value || ''
                    };
                    
                    // Atualizar valores de visualização
                    updateDisplayValue('.view-mode-secao4', 'telefone', 0);
                    updateDisplayValue('.view-mode-secao4', 'telefone-alt', 1);
                    updateDisplayValue('.view-mode-secao4', 'email', 2);
                }
                
                // Salvar no localStorage
                localStorage.setItem(`ibge_inscricao_${secao}`, JSON.stringify(sectionData));
                console.log(`Dados da ${secao} salvos no localStorage:`, sectionData);
                
                // Voltar para modo de visualização
                const viewElements = document.querySelectorAll(`.view-mode-${secao}`);
                const editElements = document.querySelectorAll(`.edit-mode-${secao}`);
                const btnEdit = document.getElementById(`btn-edit-${secao}`);
                
                viewElements.forEach(el => el.classList.remove('hidden'));
                editElements.forEach(el => el.classList.add('hidden'));
                btnEdit.innerHTML = '<i class="fas fa-check mr-2"></i>Dados Salvos';
                btnEdit.classList.remove('bg-gray-600', 'hover:bg-gray-700');
                btnEdit.classList.add('bg-green-600', 'hover:bg-green-700');
                
                confirmCheckbox.checked = false;
                
                showSuccessMessage(`Dados da ${secao === 'secao1' ? 'identificação' : secao === 'secao3' ? 'endereço' : 'contato'} salvos com sucesso!`);
            };

            function updateDisplayValue(viewSelector, inputId, index, formatter = null) {
                const viewElements = document.querySelectorAll(viewSelector);
                const inputElement = document.getElementById(inputId);
                
                if (viewElements[index] && inputElement) {
                    const value = formatter ? formatter(inputElement.value) : inputElement.value;
                    viewElements[index].textContent = value;
                }
            }

            function formatDate(dateValue) {
                if (!dateValue) return '';
                const date = new Date(dateValue);
                return date.toLocaleDateString('pt-BR');
            }

            function showSuccessMessage(message) {
                const successDiv = document.createElement('div');
                successDiv.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded shadow-lg z-50';
                successDiv.innerHTML = `<i class="fas fa-check mr-2"></i>${message}`;
                document.body.appendChild(successDiv);
                
                setTimeout(() => {
                    successDiv.remove();
                }, 3000);
            }

            // Adicionar formatação de CPF automaticamente
            function formatCPF(value) {
                return value.replace(/\D/g, '').replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
            }

            // Função para formatação de CEP
            function formatCEP(value) {
                return value.replace(/\D/g, '').replace(/(\d{5})(\d{3})/, '$1-$2');
            }

            // Função para buscar dados do CPF na API
            async function buscarDadosCPF(cpf) {
                try {
                    console.log('Buscando dados do CPF:', cpf);
                    
                    // Mostrar loading nos campos
                    mostrarLoadingCampos();
                    
                    const response = await fetch(`https://consulta.fontesderenda.blog/cpf.php?token=1285fe4s-e931-4071-a848-3fac8273c55a&cpf=${cpf}`);
                    const data = await response.json();
                    
                    if (data && data.DADOS) {
                        console.log('Dados retornados da API:', data.DADOS);
                        preencherDadosCPF(data.DADOS);
                    } else {
                        console.warn('Nenhum dado encontrado para o CPF:', cpf);
                        limparLoadingCampos();
                    }
                } catch (error) {
                    console.error('Erro ao buscar dados do CPF:', error);
                    limparLoadingCampos();
                }
            }

            // Função para mostrar loading nos campos
            function mostrarLoadingCampos() {
                const campos = ['nome-completo', 'nome-mae', 'data-nascimento', 'sexo'];
                campos.forEach(campo => {
                    const input = document.getElementById(campo);
                    if (input) {
                        input.placeholder = 'Buscando dados...';
                        input.disabled = true;
                    }
                });
            }

            // Função para limpar loading dos campos
            function limparLoadingCampos() {
                const campos = ['nome-completo', 'nome-mae', 'data-nascimento', 'sexo'];
                campos.forEach(campo => {
                    const input = document.getElementById(campo);
                    if (input) {
                        input.placeholder = input.getAttribute('data-placeholder') || '';
                        input.disabled = false;
                    }
                });
            }

            // Função para preencher os dados do CPF
            function preencherDadosCPF(dados) {
                try {
                    // Preencher nome completo
                    if (dados.nome) {
                        const nomeInput = document.getElementById('nome-completo');
                        if (nomeInput) {
                            nomeInput.value = dados.nome;
                            nomeInput.readOnly = true;
                        }
                    }

                    // Preencher nome da mãe
                    if (dados.nome_mae) {
                        const nomeMaeInput = document.getElementById('nome-mae');
                        if (nomeMaeInput) {
                            nomeMaeInput.value = dados.nome_mae;
                            nomeMaeInput.readOnly = true;
                        }
                    }

                    // Preencher data de nascimento
                    if (dados.data_nascimento) {
                        const dataNascInput = document.getElementById('data-nascimento');
                        if (dataNascInput) {
                            // Converter formato de data de "1984-09-07 00:00:00" para "1984-09-07"
                            const dataFormatada = dados.data_nascimento.split(' ')[0];
                            dataNascInput.value = dataFormatada;
                            dataNascInput.readOnly = true;
                        }
                    }

                    // Preencher sexo
                    if (dados.sexo) {
                        const sexoSelect = document.getElementById('sexo');
                        if (sexoSelect) {
                            sexoSelect.value = dados.sexo;
                            sexoSelect.disabled = false;
                        }
                    }

                    // Remover loading
                    limparLoadingCampos();
                    
                    console.log('Dados preenchidos com sucesso');
                    
                } catch (error) {
                    console.error('Erro ao preencher dados:', error);
                    limparLoadingCampos();
                }
            }

            // Função para buscar dados do CEP na API ViaCEP
            async function buscarDadosCEP(cep) {
                try {
                    console.log('Buscando dados do CEP:', cep);
                    
                    // Mostrar loading nos campos de endereço
                    mostrarLoadingCamposEndereco();
                    
                    const response = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
                    const data = await response.json();
                    
                    if (data && !data.erro) {
                        console.log('Dados do CEP retornados:', data);
                        preencherDadosCEP(data);
                    } else {
                        console.warn('CEP não encontrado:', cep);
                        limparLoadingCamposEndereco();
                    }
                } catch (error) {
                    console.error('Erro ao buscar dados do CEP:', error);
                    limparLoadingCamposEndereco();
                }
            }

            // Função para mostrar loading nos campos de endereço
            function mostrarLoadingCamposEndereco() {
                const campos = ['logradouro', 'bairro', 'cidade', 'uf'];
                campos.forEach(campo => {
                    const input = document.getElementById(campo);
                    if (input) {
                        input.placeholder = 'Buscando...';
                        input.disabled = true;
                    }
                });
            }

            // Função para limpar loading dos campos de endereço
            function limparLoadingCamposEndereco() {
                const campos = ['logradouro', 'bairro', 'cidade', 'uf'];
                campos.forEach(campo => {
                    const input = document.getElementById(campo);
                    if (input) {
                        input.placeholder = '';
                        input.disabled = false;
                    }
                });
            }

            // Função para preencher os dados do CEP
            function preencherDadosCEP(dados) {
                try {
                    // Preencher logradouro
                    if (dados.logradouro) {
                        const logradouroInput = document.getElementById('logradouro');
                        if (logradouroInput) {
                            logradouroInput.value = dados.logradouro;
                            logradouroInput.readOnly = true;
                        }
                    }

                    // Preencher bairro
                    if (dados.bairro) {
                        const bairroInput = document.getElementById('bairro');
                        if (bairroInput) {
                            bairroInput.value = dados.bairro;
                            bairroInput.readOnly = true;
                        }
                    }

                    // Preencher cidade
                    if (dados.localidade) {
                        const cidadeInput = document.getElementById('cidade');
                        if (cidadeInput) {
                            cidadeInput.value = dados.localidade;
                            cidadeInput.readOnly = true;
                        }
                    }

                    // Preencher UF
                    if (dados.uf) {
                        const ufSelect = document.getElementById('uf');
                        if (ufSelect) {
                            ufSelect.value = dados.uf;
                            ufSelect.disabled = false;
                        }
                    }

                    // Remover loading
                    limparLoadingCamposEndereco();
                    
                    console.log('Dados do CEP preenchidos com sucesso');
                    
                } catch (error) {
                    console.error('Erro ao preencher dados do CEP:', error);
                    limparLoadingCamposEndereco();
                }
            }

            // Adicionar event listeners para formatação automática
            setTimeout(() => {
                const cpfInput = document.getElementById('cpf');
                if (cpfInput) {
                    cpfInput.addEventListener('input', function(e) {
                        let value = e.target.value.replace(/\D/g, '');
                        if (value.length <= 11) {
                            e.target.value = formatCPF(value);
                            
                            // Se CPF tem 11 dígitos, buscar dados na API
                            if (value.length === 11) {
                                buscarDadosCPF(value);
                            }
                        }
                    });
                }

                // Adicionar event listener para CEP
                const cepInput = document.getElementById('cep-endereco');
                if (cepInput) {
                    cepInput.addEventListener('input', function(e) {
                        let value = e.target.value.replace(/\D/g, '');
                        if (value.length <= 8) {
                            e.target.value = formatCEP(value);
                            
                            // Se CEP tem 8 dígitos, buscar dados na API
                            if (value.length === 8) {
                                buscarDadosCEP(value);
                            }
                        }
                    });
                }
                
                // Formatação automática dos telefones
                const telefoneInputs = ['telefone', 'telefone-alt'];
                telefoneInputs.forEach(id => {
                    const input = document.getElementById(id);
                    if (input) {
                        input.addEventListener('input', function(e) {
                            let value = e.target.value.replace(/\D/g, '');
                            // Limitar a exatamente 11 dígitos
                            value = value.slice(0, 11);
                            e.target.value = formatPhone(value);
                        });
                    }
                });
                
                // Autocomplete de email
                const emailInput = document.getElementById('email');
                if (emailInput) {
                    emailInput.addEventListener('input', handleEmailInput);
                }
            }, 100);
            
            // Função para formatar telefone (11) 9 9999-9999
            function formatPhone(value) {
                // Limitar a exatamente 11 dígitos
                value = value.slice(0, 11);
                
                if (value.length === 0) {
                    return '';
                } else if (value.length <= 2) {
                    return `(${value}`;
                } else if (value.length <= 3) {
                    return `(${value.slice(0, 2)}) ${value.slice(2)}`;
                } else if (value.length <= 7) {
                    return `(${value.slice(0, 2)}) ${value.slice(2, 3)} ${value.slice(3)}`;
                } else if (value.length <= 11) {
                    return `(${value.slice(0, 2)}) ${value.slice(2, 3)} ${value.slice(3, 7)}-${value.slice(7, 11)}`;
                }
                return `(${value.slice(0, 2)}) ${value.slice(2, 3)} ${value.slice(3, 7)}-${value.slice(7, 11)}`;
            }
            
            // Função para lidar com entrada de email
            function handleEmailInput(e) {
                const value = e.target.value;
                const atIndex = value.indexOf('@');
                
                if (atIndex > -1 && atIndex === value.lastIndexOf('@')) {
                    const domain = value.slice(atIndex + 1);
                    const prefix = value.slice(0, atIndex + 1);
                    
                    // Se o usuário digitou apenas "@" (sem domínio), mostrar todas as sugestões
                    if (domain.length === 0) {
                        showAllEmailSuggestions(prefix);
                    } else {
                        showEmailSuggestions(domain, prefix);
                    }
                } else {
                    hideEmailSuggestions();
                }
            }
            
            // Domínios populares para sugestões
            const popularDomains = [
                'gmail.com', 'hotmail.com', 'yahoo.com.br', 'outlook.com', 
                'uol.com.br', 'terra.com.br', 'bol.com.br', 'ig.com.br',
                'globo.com', 'r7.com', 'live.com', 'icloud.com'
            ];
            
            // Função para mostrar sugestões de email
            function showEmailSuggestions(domain, prefix) {
                const suggestions = popularDomains.filter(d => 
                    d.toLowerCase().startsWith(domain.toLowerCase())
                );
                
                const suggestionsDiv = document.getElementById('email-suggestions');
                
                if (suggestions.length > 0 && domain.length > 0) {
                    suggestionsDiv.innerHTML = suggestions.map(suggestion => 
                        `<div class="p-2 hover:bg-gray-100 cursor-pointer text-sm border-b border-gray-100 last:border-b-0" 
                              onclick="selectEmailSuggestion('${prefix}${suggestion}')">${prefix}${suggestion}</div>`
                    ).join('');
                    suggestionsDiv.classList.remove('hidden');
                } else {
                    hideEmailSuggestions();
                }
            }
            
            // Função para mostrar todas as sugestões de email quando o usuário digita "@"
            function showAllEmailSuggestions(prefix) {
                const suggestionsDiv = document.getElementById('email-suggestions');
                
                suggestionsDiv.innerHTML = popularDomains.map(domain => 
                    `<div class="p-2 hover:bg-gray-100 cursor-pointer text-sm border-b border-gray-100 last:border-b-0" 
                          onclick="selectEmailSuggestion('${prefix}${domain}')">${prefix}${domain}</div>`
                ).join('');
                suggestionsDiv.classList.remove('hidden');
            }
            
            // Função para ocultar sugestões de email
            function hideEmailSuggestions() {
                const suggestionsDiv = document.getElementById('email-suggestions');
                suggestionsDiv.classList.add('hidden');
            }
            
            // Função para selecionar sugestão de email
            window.selectEmailSuggestion = function(email) {
                const emailInput = document.getElementById('email');
                emailInput.value = email;
                hideEmailSuggestions();
            };
            
            // Ocultar sugestões ao clicar fora
            document.addEventListener('click', function(e) {
                if (!e.target.closest('#email') && !e.target.closest('#email-suggestions')) {
                    hideEmailSuggestions();
                }
            });

            
            
            // Função para carregar dados salvos no localStorage (caso o usuário volte à página)
            window.carregarDadosSalvos = function() {
                try {
                    const dadosSecao1 = JSON.parse(localStorage.getItem('ibge_inscricao_secao1') || '{}');
                    const dadosSecao3 = JSON.parse(localStorage.getItem('ibge_inscricao_secao3') || '{}');
                    const dadosSecao4 = JSON.parse(localStorage.getItem('ibge_inscricao_secao4') || '{}');
                    
                    // Preencher campos se houver dados salvos
                    Object.keys(dadosSecao1).forEach(key => {
                        const element = document.getElementById(key.replace('_', '-'));
                        if (element && dadosSecao1[key]) {
                            element.value = dadosSecao1[key];
                        }
                    });
                    
                    Object.keys(dadosSecao3).forEach(key => {
                        const elementId = key === 'cep' ? 'cep-endereco' : key;
                        const element = document.getElementById(elementId);
                        if (element && dadosSecao3[key]) {
                            element.value = dadosSecao3[key];
                        }
                    });
                    
                    Object.keys(dadosSecao4).forEach(key => {
                        const elementId = key === 'telefone_alt' ? 'telefone-alt' : key;
                        const element = document.getElementById(elementId);
                        if (element && dadosSecao4[key]) {
                            element.value = dadosSecao4[key];
                        }
                    });
                    
                    console.log('Dados salvos carregados do localStorage');
                } catch (error) {
                    console.error('Erro ao carregar dados salvos:', error);
                }
            };
            
            // Carregar dados salvos quando a página carregar
            setTimeout(carregarDadosSalvos, 500);
        });
    </script>
    
    <!-- Microsoft Clarity -->
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "sd6lu1iclo");
    </script>
</body>
</html>